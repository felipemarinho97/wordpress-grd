var CustomizePreviewFeaturedImage=function(a,b){"use strict";var c={data:{partialArgs:{selector:"",containerInclusive:!0,fallbackDependentSelector:""}}};return c.init=function(b){"undefined"!=typeof b&&_.extend(c.data,b),c.registerPartials(),a.previewPosts.wpApiModelInstances.bind("add",c.handleWpApiBackboneModelAdd)},c.handleWpApiBackboneModelAdd=function(b){var c;_.isUndefined(b.get("featured_media"))||(c="postmeta["+b.get("type")+"]["+String(b.get("id"))+"][_thumbnail_id]",a(c,function(a){a.bind(function(a){b.set("featured_media",a)})}))},c.FeaturedImagePartial=a.selectiveRefresh.partialConstructor.deferred.extend({idPattern:/^postmeta\[(.+?)]\[(\d+)]\[_thumbnail_id]$/,initialize:function(b,d){var e,f,g,h,i=this;e=b.match(i.idPattern),g=e[1],f=parseInt(e[2],10),h=_.extend({post_id:f,post_type:g,selector:c.data.partialArgs.selector.replace(/%d/g,String(f)),settings:[b],primarySetting:b,containerInclusive:c.data.partialArgs.containerInclusive,fallbackDependentSelector:c.data.partialArgs.fallbackDependentSelector},d?d.params||{}:{}),a.selectiveRefresh.partialConstructor.deferred.prototype.initialize.call(i,b,{params:h})},refresh:function(){var c,d,e=this;return c=a(e.params.primarySetting),""===c()?(d=b.Deferred(),e.fallback(),d.reject(),d):a.selectiveRefresh.Partial.prototype.refresh.apply(e,arguments)},renderContent:function(b){var c=this;return""===b.addedContent?(c.fallback(),!1):a.selectiveRefresh.Partial.prototype.renderContent.call(c,b)},fallback:function(){var c,d=this;c=d.params.fallbackDependentSelector.replace(/%d/g,String(d.params.post_id)),0!==b(c).length&&a.selectiveRefresh.partialConstructor.deferred.prototype.fallback.call(d)}}),c.ensurePartialForSetting=function(b){var d,e;return c.FeaturedImagePartial.prototype.idPattern.test(b.id)?(e=b.id,(d=a.selectiveRefresh.partial(e))?d:(d=new c.FeaturedImagePartial(e,{params:{settings:[b.id]}}),a.selectiveRefresh.partial.add(e,d),d)):null},c.registerPartials=function(){a.selectiveRefresh.partialConstructor.featured_image=c.FeaturedImagePartial,a.each(c.ensurePartialForSetting),a.bind("add",c.ensurePartialForSetting)},"undefined"!=typeof module&&(module.exports=c),c}(wp.customize,jQuery);